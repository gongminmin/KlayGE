SET(LIB_NAME ZLib)

SET(ZLIB_SOURCE_FILES
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/adler32.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/compress.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/crc32.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/deflate.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/gzclose.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/gzlib.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/gzread.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/gzwrite.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/infback.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/inffast.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/inflate.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/inftrees.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/trees.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/uncompr.c
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/zutil.c
)
SET(ZLIB_HEADER_FILES
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/crc32.h
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/deflate.h
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/gzguts.h
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/inffast.h
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/inffixed.h
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/inflate.h
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/inftrees.h
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/trees.h
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/zconf.h
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/zlib.h
	${FREEIMAGE_PROJECT_DIR}/Source/ZLib/zutil.h
)
SOURCE_GROUP("Source Files" FILES ${ZLIB_SOURCE_FILES})
SOURCE_GROUP("Header Files" FILES ${ZLIB_HEADER_FILES})

IF(KLAYGE_PLATFORM_WINDOWS)
	ADD_DEFINITIONS(-D_CRT_SECURE_NO_DEPRECATE)
	ADD_DEFINITIONS(-D_CRT_SECURE_NO_WARNINGS)
	ADD_DEFINITIONS(-D_SCL_SECURE_NO_WARNINGS)
ENDIF()
ADD_LIBRARY(${LIB_NAME} STATIC
	${ZLIB_SOURCE_FILES} ${ZLIB_HEADER_FILES}
)

SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES
	ARCHIVE_OUTPUT_DIRECTORY ${FREEIMAGE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${FREEIMAGE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${FREEIMAGE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELWITHDEBINFO ${FREEIMAGE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_MINSIZEREL ${FREEIMAGE_OUTPUT_DIR}
	PROJECT_LABEL ${LIB_NAME}
	DEBUG_POSTFIX ${CMAKE_DEBUG_POSTFIX}
	OUTPUT_NAME ${LIB_NAME}${KLAYGE_OUTPUT_SUFFIX}
)

TARGET_LINK_LIBRARIES(${LIB_NAME})

SET(LIB_NAME LibJPEG)

SET(LIBJPEG_SOURCE_FILES
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jaricom.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jcapimin.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jcapistd.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jcarith.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jccoefct.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jccolor.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jcdctmgr.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jchuff.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jcinit.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jcmainct
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jcmarker.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jcmaster.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jcomapi.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jcparam.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jcprepct.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jcsample.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jctrans.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdapimin.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdapistd.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdarith.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdatadst.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdatasrc.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdcoefct.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdcolor.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jddctmgr.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdhuff.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdinput.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdmainct.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdmarker.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdmaster.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdmerge.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdpostct.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdsample.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdtrans.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jerror.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jfdctflt.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jfdctfst.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jfdctint.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jidctflt.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jidctfst.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jidctint.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jmemmgr.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jmemnobs.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jquant1.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jquant2.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jutils.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/transupp.c
)
SET(LIBJPEG_HEADER_FILES
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jconfig.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jdct.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jerror.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jinclude.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jmemsys.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jmorecfg.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jpegint.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jpeglib.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/jversion.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG/transupp.h
)
SOURCE_GROUP("Source Files" FILES ${LIBJPEG_SOURCE_FILES})
SOURCE_GROUP("Header Files" FILES ${LIBJPEG_HEADER_FILES})

ADD_LIBRARY(${LIB_NAME} STATIC
	${LIBJPEG_SOURCE_FILES} ${LIBJPEG_HEADER_FILES}
)

if(KLAYGE_PLATFORM_WINDOWS)
	target_compile_definitions(${LIB_NAME}
		PRIVATE
			-D_CRT_SECURE_NO_DEPRECATE
	)
endif()

SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES
	ARCHIVE_OUTPUT_DIRECTORY ${FREEIMAGE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${FREEIMAGE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${FREEIMAGE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELWITHDEBINFO ${FREEIMAGE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_MINSIZEREL ${FREEIMAGE_OUTPUT_DIR}
	PROJECT_LABEL ${LIB_NAME}
	DEBUG_POSTFIX ${CMAKE_DEBUG_POSTFIX}
	OUTPUT_NAME ${LIB_NAME}${KLAYGE_OUTPUT_SUFFIX}
)

TARGET_LINK_LIBRARIES(${LIB_NAME})

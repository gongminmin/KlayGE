SET(LIB_NAME LibTIFF4)

SET(LIBTIFF4_SOURCE_FILES
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_aux.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_close.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_codec.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_color.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_compress.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_dir.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_dirinfo.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_dirread.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_dirwrite.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_dumpmode.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_error.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_extension.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_fax3.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_fax3sm.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_flush.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_getimage.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_jpeg.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_luv.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_lzma.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_lzw.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_next.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_ojpeg.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_open.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_packbits.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_pixarlog.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_predict.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_print.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_read.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_strip.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_swab.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_thunder.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_tile.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_version.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_warning.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_write.c
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_zip.c
)
SET(LIBTIFF4_HEADER_FILES
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/t4.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_config.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_dir.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_fax3.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tif_predict.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tiff.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tiffconf.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tiffio.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tiffiop.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/tiffvers.h
	${FREEIMAGE_PROJECT_DIR}/Source/LibTIFF4/uvcode.h
)
SOURCE_GROUP("Source Files" FILES ${LIBTIFF4_SOURCE_FILES})
SOURCE_GROUP("Header Files" FILES ${LIBTIFF4_HEADER_FILES})

IF(KLAYGE_PLATFORM_WINDOWS)
	ADD_DEFINITIONS(-D_CRT_SECURE_NO_DEPRECATE)
ENDIF()
INCLUDE_DIRECTORIES(${FREEIMAGE_PROJECT_DIR}/Source/ZLib)
INCLUDE_DIRECTORIES(${FREEIMAGE_PROJECT_DIR}/Source/LibJPEG)
ADD_LIBRARY(${LIB_NAME} STATIC
	${LIBTIFF4_SOURCE_FILES} ${LIBTIFF4_HEADER_FILES}
)
ADD_DEPENDENCIES(${LIB_NAME} LibJPEG ZLib)

SET_TARGET_PROPERTIES(${LIB_NAME} PROPERTIES
	ARCHIVE_OUTPUT_DIRECTORY ${FREEIMAGE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_DEBUG ${FREEIMAGE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELEASE ${FREEIMAGE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_RELWITHDEBINFO ${FREEIMAGE_OUTPUT_DIR}
	ARCHIVE_OUTPUT_DIRECTORY_MINSIZEREL ${FREEIMAGE_OUTPUT_DIR}
	PROJECT_LABEL ${LIB_NAME}
	DEBUG_POSTFIX ${CMAKE_DEBUG_POSTFIX}
	OUTPUT_NAME ${LIB_NAME}${KLAYGE_OUTPUT_SUFFIX}
)

TARGET_LINK_LIBRARIES(${LIB_NAME})
